services:
  # Backend API Service (if using Express.js)
  # Uncomment if deploying Express server to Render
  # - type: web
  #   name: aetherandstones-api
  #   env: node
  #   buildCommand: pnpm install
  #   startCommand: node server.js
  #   envVars:
  #     - key: DATABASE_URL
  #       sync: false
  #     - key: APP_URL
  #       sync: false
  #     - key: EMAIL_PROVIDER_KEY
  #       sync: false
  #     - key: STRIPE_SECRET_KEY
  #       sync: false
  #     - key: STRIPE_WEBHOOK_SECRET
  #       sync: false
  #     - key: SESSION_SECRET
  #       sync: false
  #     - key: FROM_EMAIL
  #       sync: false
  #     - key: NODE_ENV
  #       value: production

  # Frontend Static Site
  - type: static
    name: aetherandstones
    buildCommand: pnpm build
    staticPublishPath: ./dist
    envVars:
      - key: VITE_API_URL
        sync: false  # Set to your backend API URL
    routes:
      - type: rewrite
        source: /*
        destination: /index.html

  # PostgreSQL Database
  # Create manually in Render Dashboard, then reference DATABASE_URL
  # - type: pspg
  #   name: aetherandstones-db
  #   plan: free  # or starter/pro for production

